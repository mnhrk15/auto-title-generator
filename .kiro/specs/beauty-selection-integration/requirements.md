# Requirements Document

## Introduction

この機能は、HotPepper Beautyが発行する「Beauty Selection」のトレンド情報をアプリケーションに統合し、ユーザー（美容師）が特集に掲載される可能性のある質の高いマーケティングテンプレートを容易に生成できるようにする機能です。本機能により、アプリケーションを単なる効率化ツールから、集客と売上向上に直結する戦略的マーケティング支援ツールへと進化させます。

## Requirements

### Requirement 1

**User Story:** 美容師として、現在特集されているトレンドキーワードを簡単に確認し、ワンクリックで選択できるようにしたい。そうすることで、特集に掲載される可能性の高いテンプレートを効率的に生成できる。

#### Acceptance Criteria

1. WHEN ユーザーがトップページにアクセス THEN システムは「今月の特集キーワード」セクションをキーワード入力欄の近くに表示する
2. WHEN 特集キーワードセクションが表示される THEN システムは現在特集されているキーワードをプルダウン形式で表示する
3. WHEN ユーザーが特集キーワードボタンをクリック THEN システムは該当するキーワードをメインの「キーワード入力欄」に自動入力する
4. WHEN 特集キーワードが選択される THEN システムはそのキーワードに紐づく性別（レディース/メンズ）を自動で選択する
5. WHEN 特集キーワードがクリックされる THEN システムはクリックされたボタンをアクティブ状態（選択中であることがわかるスタイル）に変化させる

### Requirement 2

**User Story:** 美容師として、特集キーワードを使用してテンプレートを生成する際に、特集掲載条件を満たした高品質なテンプレートが自動生成されるようにしたい。そうすることで、Beauty Selectionに掲載される可能性を最大化できる。

#### Acceptance Criteria

1. WHEN テンプレート生成APIがリクエストを受信 THEN システムは受け取ったキーワードが「特集キーワード」であるかを判定する
2. WHEN キーワードが「特集キーワード」と判定される THEN システムはTemplateGeneratorに特別な指示（フラグと掲載条件テキスト）を渡す
3. WHEN TemplateGeneratorが特集キーワードの指示を受け取る THEN システムはAIへのプロンプトに「以下の特集掲載条件を絶対に満たすこと」という強力な指示を最優先事項として追加する
4. WHEN 特集掲載条件の指示が追加される THEN システムは具体的な掲載条件（例：「スタイル名に『くびれヘア』という文言を入れること」）をプロンプトに明記する
5. WHEN 特集キーワードでテンプレートが生成される THEN システムは通常のテンプレートよりも特集掲載条件に特化した高品質なテンプレートを生成する

### Requirement 3

**User Story:** システム管理者として、特集キーワードの情報を簡単に更新できるようにしたい。そうすることで、2ヶ月に一度の更新作業を効率的に行い、常に最新のトレンド情報を提供できる。

#### Acceptance Criteria

1. WHEN システムが起動する THEN システムは外部化されたJSONファイル（app/data/featured_keywords.json）から特集キーワードのリストを読み込む
2. WHEN JSONファイルが読み込まれる THEN システムはキーワード名、性別、AIへの掲載条件テキスト等の情報をUIとバックエンドロジックに反映させる
3. WHEN 管理者が特集キーワードを更新したい THEN 管理者はJSONファイルを新しい内容に書き換えて再デプロイするだけで更新を完了できる
4. WHEN JSONファイルが更新される THEN システムはPythonコードを直接編集することなく新しい特集キーワード情報を反映する
5. WHEN JSONファイルの形式が正しい THEN システムは`[{ "name": "表示名", "keyword": "内部キーワード", "gender": "ladies", "condition": "AIへの指示文" }]`の配列形式でデータを管理する

### Requirement 4

**User Story:** ユーザーとして、特集キーワード機能が既存の機能と統合され、シームレスに利用できるようにしたい。そうすることで、学習コストを最小限に抑えながら新機能の恩恵を受けられる。

#### Acceptance Criteria

1. WHEN 特集キーワード機能が実装される THEN システムは既存のテンプレート生成フローを維持する
2. WHEN 通常のキーワードが入力される THEN システムは従来通りの動作でテンプレートを生成する
3. WHEN 特集キーワードと通常キーワードが混在する THEN システムは適切に判定して処理を分岐する
4. WHEN 特集キーワード機能でエラーが発生する THEN システムは通常のテンプレート生成にフォールバックする
5. WHEN ユーザーが特集キーワードを使用する THEN システムは生成されたテンプレートが特集対応であることを視覚的に示す